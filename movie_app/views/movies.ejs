<% include partials/header %>
<center>
<h2>imdb hot movies</h2>

<div class="container">
<a href="/" role="button" class="btn btn-primary btn-lg">Home</a>
<a href="/actors" role="button" class="btn btn-primary btn-lg">Actors</a>
<a href="/directors" role="button" class="btn btn-primary btn-lg">Directors</a>
</div>

<form action="/movies" method="get" id="selecting">
<div class="form-check form-check-inline">
  <label class="form-check-label active">
    <input type="checkbox" value="chosen" name="number"> #
  </label>
</div>
<div class="form-check form-check-inline">
  <label class="form-check-label active">
    <input type="checkbox" value="chosen" name="title"> title
  </label>
</div>
<div class="form-check form-check-inline">
  <label class="form-check-label active">
    <input type="checkbox" value="chosen" name="year"> year
  </label>
</div>
<div class="form-check form-check-inline">
  <label class="form-check-label active">
    <input type="checkbox" value="chosen" name="rank"> rank
  </label>
</div>
<div class="form-check form-check-inline">
  <label class="form-check-label active">
    <input type="checkbox" value="chosen" name="director"> director
  </label>
</div>
<div class="form-check form-check-inline">
  <label class="form-check-label active">
    <input type="checkbox" value="chosen" name="actor"> actor
  </label>
</div>
<button type="submit" class="btn btn-default">Submit</button>
</form>


<div class="container-fluid">
<div class="table-responsive">  
<table class="table table-striped">
  
<thead class="thead-inverse">
<tr class="reactable-column-header">
    <td id="number" class="target">#</td>
    <td id="title" class="target">title</td>
    <td id="year" class="target">year</td>
    <td id="rank" class="target">rank</td>
    <td id="director" class="target">director</td>
    <td id="actors" class="target">actors</td>
</tr>    
</thead>
<tbody class="reactable-data"> 
<%  for(var i=0; (i<result.length) && (i<50); i++)  {%>
<tr>
    <td>
    <%=  result[i].id  %>
    </td>
    <td>
    <a href=<%=  result[i].link  %>
    ><%=  result[i].title  %></a>
    </td>
    <td>
    <%=  result[i].year  %>
    </td>
    <td>
    <%=  result[i].score  %>
    </td>
    <td>
    <%=  result[i].director_name  %>
    </td>
    <td>
    <%=  result[i].list %>
    </td>
</tr>    
<%  } %>   
</tbody> 

</table>
</div>  
</div>    
</center>
 <script>
    function changeRank(item){
        var order_item, order;
        order_item="<%= page.order_item %>";
        order="<%= page.order%>";
        if(order_item == item) {
            if(order == "asc") {
                order = "desc";
            }
            else {
                order = "asc";
            }
        }
        else {
            order_item = item;
            order = "asc";
        }
        var direct="/movies?order_item="+order_item+"&order="+order;
        console.log(direct);
        $(location).attr('href', direct);
    }
 
    $(document).ready(function(){
    $("#number").click(function(){
        changeRank("movie.id");
    });
    });
    
    $(document).ready(function(){
    $("#title").click(function(){
        changeRank("movie.title");
    });
    });
    
    $(document).ready(function(){
    $("#year").click(function(){
        changeRank("movie.year");
    });
    });
    
    $(document).ready(function(){
    $("#rank").click(function(){
        changeRank("movie.score");
    });
    });
    
    $(document).ready(function(){
    $("#director").click(function(){
        changeRank("director.director_name");
    });
    });
    
    $(document).ready(function(){
    $("#actors").click(function(){
        changeRank("actor.actor_name");
    });
    });
    
    $(document).ready(function(){
    $(".target").mouseover(function() {
    $(this).css('cursor','pointer');
    })
    $(".target").mouseout(function() {
    $(this).css('cursor','pointer');
    });
    });
    
</script>
<% include partials/footer %>